#
# Make for GOLPAOP
#

include ../scripts/makefile.def

# artifact NAME
ART_NAME=golpaop
ART_FN=$(ART_NAME)$(DLLEXT)

# artifact objects
OBJS = \
$(TO_OBJ)/aop1_1.o \
$(TO_OBJ)/aop1_2.o

OBJS += \
$(TO_OBJ)/aop2_1.o \
$(TO_OBJ)/aop2_2.o


# artifact dependencies that auto-generated by MAKE
C_DEPS=$(OBJS:.o=.d)

ifneq ($(MAKECMDGOALS),clean)
ifneq ($(strip $(C_DEPS)),)
-include $(C_DEPS)
endif
endif


# this atrifact
TARGETS=$(TO_LIB)/$(ART_FN)


# search path for source codes of $TARGETS, and
# use space character to separate two path
VPATH=$(SRCTOP)/$(ART_NAME)

# options to compiler for $TARGETS
# -I for header files' search path
# -D for define one MACRO
MYDEF=

# options to linker for $TARGETS
# -L for library search path
# -l for one library to be linked
MYLIB=


all: $(TARGETS)


$(TO_LIB)/$(ART_FN): $(OBJS)
	@$(ECHO) 'Building target: $@'
	$(LD) -o $@ $(SOFLAG) $(OBJS) $(MYLIB) $(SYSLIB)
	@$(ECHO) 'Finished building target: $@'
	@$(ECHO) ' '


$(TO_OBJ)/%.o: %.cpp
	$(CC) -c -o $@ $(CFLAGS) $(MYDEF) $(SYSDEF) -MMD -MP -MF"$(@:%.o=%.d)" -MT"$(@:%.o=%.d)" $<
	@$(ECHO) ' '


clean:
	-$(RM) $(OBJS) $(C_DEPS) $(TARGETS)
	-@echo ' '

mostlyclean:
	-$(RM) $(OBJS) $(C_DEPS)
	-@$(ECHO) ' '

install: $(TARGETS)
	-@for f in ${TARGETS}; \
	do \
	$(CP) $$f $(INSTLIBDIR)/ ; \
	done
	@$(ECHO) 'The $(ART_NAME) has installed into $(INSTLIBDIR).'
	@$(ECHO) ' '

